{% extends 'home/basic.html' %}
{% block title %}Recommended Movies{% endblock title %}

{% load static %}

{% block css %}
<link rel="stylesheet" href="{%static 'home/css/recommend.css' %}">
{% endblock css %}

{% block body %}
<div class="container">
<br>
<br>
<h2 style="color: white">Recommended Movies</h2><br>
<div class="card-grid">
		{% for i in ritem %}
			<div class="card">
				<a style="text-decoration:none" href="/home/moviedes">
				<img src="{{i.poster}}" class="card-img-top" alt="Image has failed to load." onerror="this.src='https://source.unsplash.com/400x600/?movie,{{i.title}}';" height="350px">
				<div class="card-body">
					<h5 class="card-title">{{i.title}}</h5>
					<p class="card-text">Genre: {{i.genre}}<br>Score: {{i.imdbscore}}<br>Release Date: {{i.date}}</p>
				</a>
					<form action="/home/alwat/" method="POST">
						{% csrf_token %}
						{% comment %} <input type="hidden" name="amovieId" value="{{i.pk}}" />
						<input type="submit" class="btn btn-outline-primary" value="Already Watched"> {% endcomment %}
						<button type="button" class="btn btn-outline-primary" data-bs-toggle="modal" data-bs-target="#exampleModalrecom{{forloop.counter}}">
							Already Watched
						</button>
						<div class="modal fade" id="exampleModalrecom{{forloop.counter}}" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
							<div class="modal-dialog modal-dialog-centered">
							  <div class="modal-content">
								<div class="modal-header">
								  <h5 class="modal-title" id="exampleModalLabel">Please rate the movie:</h5>
								  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
								</div>
								<div class="modal-body">
									<label for="customRange2" class="form-label">Rating 1-10</label>
									<input type="hidden" name="amovieId" value="{{i.pk}}" />
									<input type="range" value="1" class="form-range" min="1" max="10" id="customRange2" name="rating" oninput="this.nextElementSibling.value = this.value">
									<output>1</output>
								</div>
								<div class="modal-footer">
								  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
								  <input type="submit" class="btn btn-outline-primary" value="Submit">
								</div>
							  </div>
							</div>
						  </div>
					</form>
				<form method="POST" action="/home/p2w/">
						{% csrf_token %}
					<input type="hidden" name="movieId" value="{{i.pk}}" />
					<input type="submit" class="btn btn-outline-primary" value="Plan-to-Watch">
				</form>
				
			</div>
			</div>
		{% comment %} {% if forloop.counter|divisibleby:5 and forloop.counter > 0 and not forloop.last %}
		</div>
		<div class="card-row">
		{% endif %} {% endcomment %}
		{% endfor %} 
	</div>
</div>
{% endblock body %}